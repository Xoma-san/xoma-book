# Управление репозиториями 

У нас имеется 2 репозитория: локальный (расположенный на нашей рабочей
машине) и удаленный (на сервере).

Есть 2 варианта создания локального репозитория и его связи с сетевым:

-   Создать локальный репозиторий и связать его с сетевым (git init).
    Актуально, если уже начали работу локально;

-   Создать локальную копию существующего сетевого репозитория (git
    clone). Удобно, если локально ничего нет.

## Создание локального + связь с удаленным 

С помощью команды cd перемещаемся в нужную директорию, в которой хотим
организовать хранилище, и, если нужно, создаем каталог (mkdir Nazvanie). В него
можно перенести свои наработки.

Находясь в каталоге, для создания локального репозитория вводим команду
git init.

Далее связываем созданный репозиторий с удаленным репозиторием на
примере tech_doc.

При создании репозитория в нашем ГитЛаб к нему может быть добавлен
ReadMe-файл, где в разделе Add your files приведены команды, которые
необходимо выполнить, чтобы связать локальный и удаленный репозитории.

Пример команд для tech_doc (в команде git remote add указан адрес
удаленного репозитория)

```cd existing_repo```

```git remote add origin https://gitlab.edigtech.ru/rmi/tech_doc.git```

```git branch -M master```

```git push -uf origin master```

Если хотим сохранить исходный ReadMe-файл, а также использовать не
пустой локальный репозиторий, то необходимо написать следующее:

```cd existing_repo```

```git remote add origin https://gitlab.edigtech.ru/rmi/tech_doc.git```

```git branch -M master```

```git branch \--set-upstream-to=origin/master master```

```git pull -r```

```git push```

Командой  git branch \--set-upstream-to=origin/master master мы связали
локальную мастер-ветку с удаленной. Затем забрали к себе состояние
сетевого репозитория (git pull -r). Далее передали состояние локальной
мастер-ветки в сетевой репозиторий.

## Клонирование удаленного с созданием локального

С помощью команды cd перемещаемся в нужную директорию, в которой хотим
организовать хранилище, и, если нужно, создаем каталог (mkdir).

Находясь в каталоге, для копирования удаленного репозитория с созданием
локального вводим команду git clone [ссылка на удалённый репозиторий].

Например, ссылка на удаленный репозиторий tech_doc выглядит вот
так: <https://github.test.ru/tech_doc.git>.

Такое написание команды создаст в текущей директории папку, одноименную
названию удаленного репозитория (в случае примера -  tech_doc).

При написании команды можно указать папку, куда нужно создать клон: git
clone [ссылка на удалённый репозиторий] [название папки].

При подобном написании будет кастомное название локального репозитория,
например:

git clone https://github.test.ru/tech_doc.git work-doc

По итогу выполнения команды для удаленного репозитория tech_doc будет
создан связанный локальный репозиторий work-doc.

Вся работа ведется в локальном репозитории. По итогам работы командами
Гита передаем наработки из локального репозитория в удаленный.

Важные правила:

-   в мастер нужно пушить осторожно и только тогда, когда это реально
    нужно (что-то важное потеряно и создавать для этого ветку
    бессмысленно);

-   никогда не пушить в мастер с опцией -f (--force). Опция полностью
    перезапишет удаленную ветку локальной;

-   для текущей работы всегда используем ветки (создаем их, когда
    требуется). Мелкие правки пушатся сначала в них. По итогам
    накопления правок и готовности перевыпустить документацию вливаем
    ветку в мастер.
